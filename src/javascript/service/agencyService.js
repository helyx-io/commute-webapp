////////////////////////////////////////////////////////////////////////////////////
// Imports
////////////////////////////////////////////////////////////////////////////////////

var fs = require('fs');
var util = require('util');

var logger = require('../log/logger');
var DB = require('../lib/db');


////////////////////////////////////////////////////////////////////////////////////
// Routes
////////////////////////////////////////////////////////////////////////////////////

var findAgencies = () => {

	var db = DB.schema('gtfs');

	db.Agencies.query( (q) => q ).fetch().then((agencies) => {

		return agencies.toJSON();
	});
};


var findAgencyById = (agencyId) => {

	var db = DB.schema('gtfs');

	new db.Agency({ agency_id: agencyId }).fetch().then((agency) => {

		if (!agency) {
			return undefined;
		}
		else {
			return agency.toJSON();
		}
	});

};


////////////////////////////////////////////////////////////////////////////////////
// Exports
////////////////////////////////////////////////////////////////////////////////////

module.exports = {
	findAgencies: findAgencies,
	findAgencyById: findAgencyById
};

